_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{PSTA:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/changepasswordfromlink",function(){return a("UxZK")}])},UxZK:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return R}));var n=a("o0o1"),s=a.n(n),r=a("HaE+"),o=a("1OyB"),i=a("JX7q"),c=a("vuIU"),l=a("Ji7U"),u=a("md7G"),d=a("foSv"),p=a("rePB"),h=a("q1tI"),f=a.n(h),w=a("JeC3"),m=a("JUMO"),b=a("QojX"),v=a("JI6e"),g=a("cWnB"),y=a("2VMG"),_=a("nOHt"),k=a.n(_),O=a("JpXl"),j=a("zUrK"),P=a("TUci"),N=a("CVNw"),x=a.n(N),C=a("k5ff"),I=a.n(C),S=a("lO2I"),M=a("tY2M"),T=a("r2G/"),K=a.n(T),V=f.a.createElement;function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(d.a)(e);if(t){var s=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var R=function(e){Object(l.a)(a,e);var t=G(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),Object(p.a)(Object(i.a)(n),"passwordSchema",void 0),Object(p.a)(Object(i.a)(n),"timerId",void 0),Object(p.a)(Object(i.a)(n),"clientKey",void 0),Object(p.a)(Object(i.a)(n),"contex",void 0),Object(p.a)(Object(i.a)(n),"componentDidMount",Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.clientKey=decodeURIComponent(document.location.search.split("token=")[1]),e.next=3,(new O.a).checkClientKey(n.clientKey);case 3:if(e.sent){e.next=5;break}k.a.push("/");case 5:case"end":return e.stop()}}),e)})))),Object(p.a)(Object(i.a)(n),"count",(function(){10!==n.state.count?n.setState({count:n.state.count+1}):(n.stopTimer(),n.context.signOut(),k.a.push("/"))})),n.timerId=null,n.clientKey="",n.passwordSchema=(new I.a).is().min(8).has().has().uppercase().has().lowercase().has().digits().has().symbols(),n.state={newPassword:"",count:0,newPasswordChecked:"",passwordChanged:!1,helpPopoverOpen:!1,infoMsgVisible:!1,validated:!1},n.askForNewPass=n.askForNewPass.bind(Object(i.a)(n)),n.checkNewPassword=n.checkNewPassword.bind(Object(i.a)(n)),n}return Object(c.a)(a,null,[{key:"getInitialProps",value:function(){var e=Object(r.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,e.abrupt("return",{clientKey:a.token});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),Object(c.a)(a,[{key:"askForNewPass",value:function(){var e=Object(r.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new O.a,e.t0=this,e.next=5,a.changeClientPassword(this.clientKey,this.state.newPassword);case 5:e.t1=e.sent,e.t2={passwordChanged:e.t1},e.t0.setState.call(e.t0,e.t2),this.state.passwordChanged&&(this.setState({infoMsgVisible:!0}),this.startTimer());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startTimer",value:function(){var e=this;null===this.timerId&&(this.timerId=setInterval((function(){return e.count()}),500))}},{key:"stopTimer",value:function(){clearInterval(this.timerId)}},{key:"checkNewPassword",value:function(e){var t=this.passwordSchema.validate(e.target.value);this.setState({newPassword:e.target.value,newPasswordChecked:t,validated:t})}},{key:"onDismiss",value:function(){this.setState({infoMsgVisible:!this.state.infoMsgVisible})}},{key:"render",value:function(){var e=this;return console.log(this.props),V("div",{style:{width:"100%",height:"100%",margin:"0"}},V(M.a,null),V("div",{className:K.a.background},V(w.a,{className:"toast-info",show:this.state.infoMsgVisible,onClose:this.onDismiss,style:{position:"absolute",marginTop:"80px",right:"20px"}},V(w.a.Header,{className:"header"},V("strong",{className:"mr-auto header-title"},"Informations"),V("small",{className:"header-title"},"Changer de mot de passe")),V(w.a.Body,null,"Le mot de passe est chang\xe9, vous allez \xeatre redirig\xe9 vers l'espace de connexion ",V("br",null),V("br",null),V(m.a,{now:10*this.state.count,style:{height:"3px"}}))),V("div",{className:K.a.upperloginformcontainer},V("div",{className:K.a.loginformcontainer},V(b.a,{validated:this.state.validated,onSubmit:this.askForNewPass},V(b.a.Row,{className:K.a.loginform},V(b.a.Group,{style:{fontWeight:"bold",fontSize:"1.2em"},as:v.a,md:"12"},"Mot de passe perdu ?"),V(b.a.Group,{as:v.a,md:"12",controlId:"new-password"},V(b.a.Label,null," Nouveau mot de passe "),V(j.a,null,V(j.a.Prepend,null,V(j.a.Text,{id:"newPasswordInputGroupPrepend"},V(x.a,{path:S.d,title:"Nouveau mot de passe",size:.6,horizontal:!0,vertical:!0,rotate:180,color:"black"}))),V(b.a.Control,{required:!0,type:"password",onChange:function(t){return e.checkNewPassword(t)},maxLength:32,autoComplete:"new-password"}),V(b.a.Control.Feedback,{type:"invalid"},"Veuillez renseigner un nouveau mot de passe"))),V("br",null),V(b.a.Group,{as:v.a,md:"12"},V(g.a,{type:"submit",className:K.a.changepassbtn,variant:"info"}," Changer ")),this.state.newPasswordChecked||""===this.state.newPassword?null:V(P.a,{variant:"danger",style:{textAlign:"left"}},"Le nouveau mot de passe ne r\xe9pond pas aux crit\xe8res requis, il doit contenir des:",V("ul",null,V("li",null,"Majuscules"),V("li",null,"Minuscules"),V("li",null,"Chiffres"),V("li",null,"Caract\xe8res sp\xe9ciaux")))))))))}}]),a}(f.a.Component);Object(p.a)(R,"contextType",y.a)},"r2G/":function(e,t,a){e.exports={background:"styles_background__1s7V5",toolBar:"styles_toolBar__3bNGb",upperloginformcontainer:"styles_upperloginformcontainer__1wdR5",contslidein:"styles_contslidein__2ajiU",loginformcontainer:"styles_loginformcontainer__2y_9K",logslidein:"styles_logslidein__16kCY",loginform:"styles_loginform__3pnV2",loginbtn:"styles_loginbtn__3Auj0",sendemailbtn:"styles_sendemailbtn__2LnSp",changepassbtn:"styles_changepassbtn__2R8wM"}}},[["PSTA",0,2,7,1,3,4,5,6,10]]]);